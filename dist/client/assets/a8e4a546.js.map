{"version":3,"file":"a8e4a546.js","sources":["../../../src/components/elements/Grid.jsx","../../../src/components/product/ProductGrid.client.jsx","../../../src/components/Discount.client.jsx"],"sourcesContent":["import clsx from 'clsx';\n\nexport function Grid({\n  as: Component = 'div',\n  className,\n  flow = 'row',\n  gap = 'default',\n  items = 4,\n  layout = 'default',\n  ...props\n}) {\n  const layouts = {\n    default: `grid-cols-1 ${items === 2 && 'md:grid-cols-2'}  ${\n      items === 3 && 'sm:grid-cols-3'\n    } ${items > 3 && 'md:grid-cols-3'} ${items >= 4 && 'lg:grid-cols-4'}`,\n    products: `grid-cols-2 ${items >= 3 && 'md:grid-cols-3'} ${\n      items >= 4 && 'lg:grid-cols-4'\n    }`,\n    auto: 'auto-cols-auto',\n    blog: `grid-cols-2 pt-24`,\n  };\n\n  const gaps = {\n    default: 'grid gap-2 gap-y-6 md:gap-4 lg:gap-6',\n    blog: 'grid gap-6',\n  };\n\n  const flows = {\n    row: 'grid-flow-row',\n    col: 'grid-flow-col',\n  };\n\n  const styles = clsx(flows[flow], gaps[gap], layouts[layout], className);\n\n  return <Component {...props} className={styles} />;\n}\n","import {useState, useRef, useEffect, useCallback} from 'react';\nimport {Link, flattenConnection} from '@shopify/hydrogen';\n\nimport {Button, Grid, ProductCard, DiscountPannel} from '~/components';\nimport {getImageLoadingPriority} from '~/lib/const';\n\n\nexport function ProductGrid({url, collection}) {\n  const nextButtonRef = useRef(null);\n  const initialProducts = collection?.products?.nodes || [];\n  const {hasNextPage, endCursor} = collection?.products?.pageInfo ?? {};\n  const [products, setProducts] = useState(initialProducts);\n  const [cursor, setCursor] = useState(endCursor ?? '');\n  const [nextPage, setNextPage] = useState(hasNextPage);\n  const [pending, setPending] = useState(false);\n  const haveProducts = initialProducts.length > 0;\n\n  const fetchProducts = useCallback(async () => {\n    setPending(true);\n    const postUrl = new URL(window.location.origin + url);\n    postUrl.searchParams.set('cursor', cursor);\n\n    const response = await fetch(postUrl, {\n      method: 'POST',\n    });\n    const {data} = await response.json();\n\n    // ProductGrid can paginate collection, products and search routes\n    // @ts-ignore TODO: Fix types\n    const newProducts = flattenConnection(\n      data?.collection?.products || data?.products || [],\n    );\n    const {endCursor, hasNextPage} = data?.collection?.products?.pageInfo ||\n      data?.products?.pageInfo || {endCursor: '', hasNextPage: false};\n\n    setProducts([...products, ...newProducts]);\n    setCursor(endCursor);\n    setNextPage(hasNextPage);\n    setPending(false);\n  }, [cursor, url, products]);\n\n  const handleIntersect = useCallback(\n    (entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          fetchProducts();\n        }\n      });\n    },\n    [fetchProducts],\n  );\n\n\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(handleIntersect, {\n      rootMargin: '100%',\n    });\n\n    const nextButton = nextButtonRef.current;\n\n    if (nextButton) observer.observe(nextButton);\n\n    return () => {\n      if (nextButton) observer.unobserve(nextButton);\n    };\n  }, [nextButtonRef, cursor, handleIntersect]);\n\n  if (!haveProducts) {\n    return (\n      <>\n        <p>No products found on this collection</p>\n        <Link to=\"/products\">\n          <p className=\"underline\">Browse catalog</p>\n        </Link>\n      </>\n    );\n  }\n\n\n  const [bundlePrise, setBundlePrise] = useState(0);\n  const addProduct =(price) =>{\n    setBundlePrise(bundlePrise + +price);\n  }\n  \n\n  return (\n    <>\n      <Grid layout=\"products\">\n        {products.map((product, i) => (\n          <ProductCard\n            priceAction={addProduct}\n            key={product.id}\n            product={product}\n            loading={getImageLoadingPriority(i)}\n          />\n        ))} \n      </Grid>\n      <DiscountPannel totalPrice={bundlePrise}/>\n      {nextPage && (\n        <div\n          className=\"flex items-center justify-center mt-6\"\n          ref={nextButtonRef}\n        >\n          <Button\n            variant=\"secondary\"\n            disabled={pending}\n            onClick={fetchProducts}\n            width=\"full\"\n          >\n            {pending ? 'Loading...' : 'Load more products'}\n          </Button>\n        </div>\n      )}\n    </>\n  );\n}\n","import {useState} from 'react';\r\n\r\nfunction DiscountPannel(props) {\r\n  return (\r\n    <div className=\"flex flex-col\">\r\n      <div className=\"flex bg-black text-white text-center h-10 justify-center items-center rounded-t-xl\">\r\n        <h2 className=\"flex  text-white text-center items-center justify-center\">\r\n          Add $100 to save 10%\r\n        </h2>\r\n      </div>\r\n      <div className=\"flex flex-col bg-stone-200 px-7 py-3.5 \">\r\n        <div className=\"flex flex-row justify-between text-lg font-medium\">\r\n          <div className=\"\">\r\n            <h3 className=\"\">Boundle Price</h3>\r\n            <h3 className=\"font-bold text-2xl\">${props.totalPrice}</h3>\r\n          </div>\r\n          <div className=\"\">\r\n            <h3 className=\"\">Your Savings</h3>\r\n            <h3 className=\"font-bold text-2xl\">\r\n              {props.totalPrice > 100 ? '$' + props.totalPrice / 10 : '$' + 0}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-orange-100 flex flex-row mt-2 rounded-xl w-full\">\r\n          <div\r\n            className={\r\n              props.totalPrice > 100\r\n                ? 'h-5 border-y-0 border-l-0 border  bg-zinc-500 border-black w-6/12 left-0 rounded-l-xl'\r\n                : 'h-5 border-y-0 border-l-0 border  border-black w-6/12 bg-red '\r\n            }\r\n          ></div>\r\n          <div className=\"h-5 border-y-0 border-l-0 border border-black w-3/12\"></div>\r\n          <div className=\"h-5 border-y-0 border-l-0 border border-black w-3/12\"></div>\r\n          <div className=\"h-5 border-y-0  border border-l-0  border-black w-3/12 mr-3\"></div>\r\n        </div>\r\n        <div className=\"flex flex-row w-full font-bold text-base m-1.5\">\r\n          <div className=\"w-6/12 text-right\t\">10%</div>\r\n          <div className=\"w-3/12 text-right\t\">15%</div>\r\n          <div className=\"w-3/12 text-right\t\">20%</div>\r\n          <div className=\"w-3/12 text-right\t\">25%</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DiscountPannel;\r\n"],"names":["Grid","as","Component","className","flow","gap","items","layout","props","layouts","default","products","auto","blog","gaps","styles","clsx","row","col","ProductGrid","url","collection","nextButtonRef","useRef","initialProducts","nodes","hasNextPage","endCursor","pageInfo","setProducts","useState","cursor","setCursor","nextPage","setNextPage","pending","setPending","haveProducts","length","fetchProducts","useCallback","postUrl","URL","window","location","origin","searchParams","set","response","fetch","method","data","json","newProducts","flattenConnection","handleIntersect","entries","forEach","entry","isIntersecting","useEffect","observer","IntersectionObserver","rootMargin","nextButton","current","observe","unobserve","_Fragment","_jsx","Link","bundlePrise","setBundlePrise","addProduct","price","map","product","i","ProductCard","getImageLoadingPriority","id","DiscountPannel","Button","_jsxs","totalPrice"],"mappings":"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"}